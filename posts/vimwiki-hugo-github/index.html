<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Vimwiki Hugo Github.io 연동하기 | Borisu Wiki Home</title>
<meta name=keywords content="vimwiki,hugo,papermod,devel"><meta name=description content="소개
마크다운 문서를 vimwiki로 작성하여 간단한 메모에서 부터 블로그, 리포트, 기술 문서에 이르기까지 손쉽게 만들 수 있다. 이를 기반으로 하여 깃허브에서 제공하는 무료 웹사이트에 올리는 방법을 설명하고자 한다. 아래는 간략한 개요이다.

vimwiki + hugo + github.io 를 연결하는 프로젝트이다.
vim의 vimwiki 플러그인을 사용하여 위키문서를 작성한다.
위키문서의 작성은 마크다운(../markdown) 문법으로 한다.
hugo를 사용하여 임시 로컬웹서버를 띄우고 위키문서를 html로 변환하고 브라우저에서 확인한다.
변환된 정적 html 문서를 깃허브에 올린다.
깃허브 페이지에서 이를 확인한다.
UTF-8인코딩이라면 한글도 특별히 문제가 없고 잘 된다. 다만 마크다운 파일명에 공백이 들어가면 관리가 좋지 않으니 -등으로 연결해서 쓴다.

설치 환경


OS 및 프로그램 버전"><meta name=author content="Me"><link rel=canonical href=https://neosolaris.github.io/posts/vimwiki-hugo-github/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.2211ca3164be7830024f6aad2b3a2e520843a64f8f048445c3401c1249aa051d.css integrity="sha256-IhHKMWS+eDACT2qtKzouUghDpk+PBIRFw0AcEkmqBR0=" rel="preload stylesheet" as=style><link rel=icon href=https://neosolaris.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://neosolaris.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://neosolaris.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://neosolaris.github.io/apple-touch-icon.png><link rel=mask-icon href=https://neosolaris.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://neosolaris.github.io/posts/vimwiki-hugo-github/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://neosolaris.github.io/posts/vimwiki-hugo-github/"><meta property="og:site_name" content="Borisu Wiki Home"><meta property="og:title" content="Vimwiki Hugo Github.io 연동하기"><meta property="og:description" content="소개 마크다운 문서를 vimwiki로 작성하여 간단한 메모에서 부터 블로그, 리포트, 기술 문서에 이르기까지 손쉽게 만들 수 있다. 이를 기반으로 하여 깃허브에서 제공하는 무료 웹사이트에 올리는 방법을 설명하고자 한다. 아래는 간략한 개요이다.
vimwiki + hugo + github.io 를 연결하는 프로젝트이다. vim의 vimwiki 플러그인을 사용하여 위키문서를 작성한다. 위키문서의 작성은 마크다운(../markdown) 문법으로 한다. hugo를 사용하여 임시 로컬웹서버를 띄우고 위키문서를 html로 변환하고 브라우저에서 확인한다. 변환된 정적 html 문서를 깃허브에 올린다. 깃허브 페이지에서 이를 확인한다. UTF-8인코딩이라면 한글도 특별히 문제가 없고 잘 된다. 다만 마크다운 파일명에 공백이 들어가면 관리가 좋지 않으니 -등으로 연결해서 쓴다. 설치 환경 OS 및 프로그램 버전"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-24T00:39:08+09:00"><meta property="article:modified_time" content="2022-10-06T00:52:29+09:00"><meta property="article:tag" content="Vimwiki"><meta property="article:tag" content="Hugo"><meta property="article:tag" content="Papermod"><meta property="article:tag" content="Devel"><meta property="og:image" content="https://neosolaris.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://neosolaris.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Vimwiki Hugo Github.io 연동하기"><meta name=twitter:description content="소개
마크다운 문서를 vimwiki로 작성하여 간단한 메모에서 부터 블로그, 리포트, 기술 문서에 이르기까지 손쉽게 만들 수 있다. 이를 기반으로 하여 깃허브에서 제공하는 무료 웹사이트에 올리는 방법을 설명하고자 한다. 아래는 간략한 개요이다.

vimwiki + hugo + github.io 를 연결하는 프로젝트이다.
vim의 vimwiki 플러그인을 사용하여 위키문서를 작성한다.
위키문서의 작성은 마크다운(../markdown) 문법으로 한다.
hugo를 사용하여 임시 로컬웹서버를 띄우고 위키문서를 html로 변환하고 브라우저에서 확인한다.
변환된 정적 html 문서를 깃허브에 올린다.
깃허브 페이지에서 이를 확인한다.
UTF-8인코딩이라면 한글도 특별히 문제가 없고 잘 된다. 다만 마크다운 파일명에 공백이 들어가면 관리가 좋지 않으니 -등으로 연결해서 쓴다.

설치 환경


OS 및 프로그램 버전"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://neosolaris.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Vimwiki Hugo Github.io 연동하기","item":"https://neosolaris.github.io/posts/vimwiki-hugo-github/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Vimwiki Hugo Github.io 연동하기","name":"Vimwiki Hugo Github.io 연동하기","description":"소개 마크다운 문서를 vimwiki로 작성하여 간단한 메모에서 부터 블로그, 리포트, 기술 문서에 이르기까지 손쉽게 만들 수 있다. 이를 기반으로 하여 깃허브에서 제공하는 무료 웹사이트에 올리는 방법을 설명하고자 한다. 아래는 간략한 개요이다.\nvimwiki + hugo + github.io 를 연결하는 프로젝트이다. vim의 vimwiki 플러그인을 사용하여 위키문서를 작성한다. 위키문서의 작성은 마크다운(../markdown) 문법으로 한다. hugo를 사용하여 임시 로컬웹서버를 띄우고 위키문서를 html로 변환하고 브라우저에서 확인한다. 변환된 정적 html 문서를 깃허브에 올린다. 깃허브 페이지에서 이를 확인한다. UTF-8인코딩이라면 한글도 특별히 문제가 없고 잘 된다. 다만 마크다운 파일명에 공백이 들어가면 관리가 좋지 않으니 -등으로 연결해서 쓴다. 설치 환경 OS 및 프로그램 버전\n","keywords":["vimwiki","hugo","papermod","devel"],"articleBody":"소개 마크다운 문서를 vimwiki로 작성하여 간단한 메모에서 부터 블로그, 리포트, 기술 문서에 이르기까지 손쉽게 만들 수 있다. 이를 기반으로 하여 깃허브에서 제공하는 무료 웹사이트에 올리는 방법을 설명하고자 한다. 아래는 간략한 개요이다.\nvimwiki + hugo + github.io 를 연결하는 프로젝트이다. vim의 vimwiki 플러그인을 사용하여 위키문서를 작성한다. 위키문서의 작성은 마크다운(../markdown) 문법으로 한다. hugo를 사용하여 임시 로컬웹서버를 띄우고 위키문서를 html로 변환하고 브라우저에서 확인한다. 변환된 정적 html 문서를 깃허브에 올린다. 깃허브 페이지에서 이를 확인한다. UTF-8인코딩이라면 한글도 특별히 문제가 없고 잘 된다. 다만 마크다운 파일명에 공백이 들어가면 관리가 좋지 않으니 -등으로 연결해서 쓴다. 설치 환경 OS 및 프로그램 버전\nos: Ubuntu 22.04 LTS git: 2.34.1 vim: 8.2 vimwiki 플러그인: 2.5 hugo: 0.92.2 firefox: 104.0 ~/data/vimwiki/ : 위키 저장 폴더 (1.위키를 작성하고)\n~/data/www/ : hugo 웹개발 폴더 (2.웹페이지 생성, 테스트, 개발)\n~/data/your_idname.github.io/ : 깃허브 로컬 저장소, 웹페이지 위치 (3.결과물을 저장소에 업로드)\n이 프로젝트의 목적과 방향 마크다운 (../markdown)을 기본 문서 포맷으로 정한 이유\nms word나 hwp 등은 해당 프로그램이 있어야하고 linux, unix 에서 사용하기 곤란하다. 언제 어디에서나 작성 가능한 txt 파일이 가장 좋으나 다른 문서로 변환이 곤란하다. 마크다운 문법이 가장 쉬우면서 여러 포맷으로 변환이 가능하다. vimwiki 를 사용하게 된 이유\n깃허브에서 사용되는 마크다운 문법을 지원한다. 위키이므로 문서를 서로 연결하고 조금씩 개선되는 방식이라 좋다. 일기나 할일 등의 기능을 제공하여 일정 관리가 편하다. vi 또는 vim에 익숙한 사용자에게는 가장 좋은 해결책이다. 하나의 위키 또는 여러개의 위키 프로젝트를 만들 수 있다. 설정된 폴더에 위키를 저장하고 깃허브 또는 dropbox 등에 백업하기 편리하다. vim의 다양한 플러그인과 기능 설정을 활용하여 작업의 자동화, 문서 변환 등을 쉽게 할 수 있다. hugo를 통해 웹개발과 html 변환\n깃허브에서 제공하는 github io는 정적인 html만을 올릴 수 있다. 물론 md(마크다운) 파일을 올려도 볼 수 있지만 hugo와 테마를 이용하면 근사한 개인 블로그를 만들 수 있다. 또한 깃허브에 업로드하면 2-3분 정도 후에야 변경을 확인할 수 있다. 따라서 vimwiki로 만든 파일을 html로 변환하고 로컬에서 테스트할 개발 환경이 필요해진다. 대표적인 것으로 jekyll가 있다. jekyll 기반으로 설치가 복잡하고 모듈 의존성, 처리 속도 문제 등이 있다. hugo 기반으로 의존성 문제없이 프로그램 하나만 설치하면 되고 처리 속도도 매우 빠르다. 테마는 papermod를 사용하기로 했다. 가장 심플하고 안정적이고 깔끔하다. 테마를 적용하면 search, tag, category, archive, 통계, 댓글 등 다양한 기능이 지원된다. github io에 블로그 또는 위키페이지를 올리는 이유\n홈페이지가 무료이다. your_idname.github.io도메인을 기본 제공하고 개인 도메인 설정도 가능하다. 문서의 변경사항 추적 및 복원, 버전관리도 된다. 내 위키 문서에 대한 백업도 편리하게 할 수 있다. 기본 설치와 설정 방법 본 문서에는 실제로 설치 및 설정을 순서대로 간략하게 흐름을 잃지 않는 선에서 설명하고 각각의 자세한 설명은 아래 문서로 대체한다.\ngithub io 페이지 등록 및 설정 vimwiki 설치 및 설정 hugo 설치 및 설정 papermod 테마 설치 및 설정 Step1. github.io 페이지 등록 및 설정 github.com에 가입하고 새 저장소를 만든다.\nhttps://github.com/your_idname 로 로그인한다. 우측 상단 + 아이콘을 눌러 Create a new repository 클릭. Repository name은 반드시 자신의 사용자명을 이용해서 만든다. your_idname.github.io\npublic 선택 \u003e Create repository 로 생성 완료. git을 참조\n$ sudo apt install git $ cd ~/data/ $ git config --global user.name your_idname $ git config --global user.email yourid@gmail.com $ git clone git@github.com:your_idname/your_idname.github.io.git $ cd your_idname.github.io.git $ git remote set-url git@github.com:github.com:your_idname/your_idname.github.io.git $ echo \" Hello World! \" \u003e index.html $ git add . \u0026\u0026 git commit . -m \"Upload files\" \u0026\u0026 git push $ firefox https://your_idname.github.io \u0026 Step2. Vimwiki 설치 및 설정 vim vim-plug 설치 $ sudo apt install vim $ curl -fLo ~/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim $ vim ~/.vimrc ~/.vimrc 설정 파일 call plug#begin() Plug 'vimwiki/vimwiki', {'branch': 'dev'} call plug#end() \" vimwiki 설정 \" 위키(github.io) 설정 let g:vimwiki_list = [ \\{ \\ 'path': '~/data/vimwiki', \"위키문서의 위치 \\ 'syntax' : 'markdown', \"마크다운 문법 지정 \\ 'ext' : '.md', \"저장 문서 포멧 \\ 'diary_rel_path': '.', \\} \\] \" vimwiki의 conceallevel 을 끔 let g:vimwiki_conceallevel = 0 \" vimwiki 설정이 markdown의 모든 설정을 제어하지 않게하기 let g:vimwiki_global_ext = 0 vimwik 플러그인 설치 $ vim +PlugInstall +qall vimwiki로 테스트 문서 작성: vim 실행후 \\ww 명령 후 ~/data/vimwiki/index.md 문서를 시작으로 테스트로 2-3 개의 문서를 작성해 본다. $ vim Step3. Hugo 설치 및 설정 hugo 및 테마 papermod 설치 $ sudo apt install hugo $ hugo version $ hugo new site ~/data/www -f yml $ tree ~/data/www . ├── themes ├── static ├── layouts ├── data ├── content ├── config.toml └── archetypes └── default.md $ cd ~/data/www $ git clone https://github.com/adityatelange/hugo-PaperMod themes/PaperMod --depth=1 설정 및 테스트 설정파일: ~/data/www/config.yml 테스트파일: ~/data/www/content/wiki/my-first-post.md $ cd ~/data/www $ echo 'Theme: \"PaperMod\"' \u003e\u003e config.yml $ hugo new wiki/my-first-post.md $ vim wiki/my-first-post.md html 파일을 임시로 자동생성하고 로컬 웹서버를 띄우기 $ cd ~/data/www $ hugo -D server 브라우저에서 확인 http://127.0.0.1:1313\nhtml 파일을 목적지에 생성하기\n$ cd ~/data/www $ hugo -D # default: `~/data/www/public` $ hugo -D -d ~/data/your_idname.github.io # 깃허브 로컬저장소 Step4. Vimwiki문서를 Hugo에서 처리하여 깃허브에 업로드하기 vimwiki 작성시 반드시 frontmatter를 넣어 문서를 작성한다. --- title: 문서1 date: 2022-08-24T16:28:44+09:00 (vim의 strftime이용, iabbr기능이용) lastmod: 위형식으로 수정한 날짜 입력(vim의 strftime 이용) tags: [\"테그1\",\"테그2\"] categories: [\"category1\",\"category2\"] \"weight\": 1 --- ## 소제목 1 * 내용 1 * 내용 2 ## 소제목 2 * 내용 3 * 내용 4 * [문서2](문서2) 작성된 문서(마크다운)들을 링크를 변환하여 hugo 웹개발 폴더에 복사한다.\n이 부분이 제일 문제인데 vimwiki 파일 내의 링크 형식 [문서2](문서2)가 hugo에서 html변환 시 링크를 잘 못 처리하는 데 있다. 이를 여러 가지로 알아 보았는데 hugo에서는 복잡한 설정으로 사용하기 어렵고 자동화하기도 어렵다. 각 페이지마다 hugo식의 링크방식을 넣어주어야 한다. vimwiki에서 이를 변경할 수 있다해도 vimwiki 본래의 링크 연결이 안되어 문제가 된다. 현재로서는 vimwiki의 모든 md파일을 hugo 웹개발 폴더에 복사하는 중간에 이것을 처리해 주도록 하면 된다. 즉, [문서2](문서2) 부분을 [문서2](../문서2)로 바꾸어 준다. 그 이유는 html 결과물이 BASE_URL/문서1/index.html 이런 폴더 형식으로 바뀌기 때문에 hugo프로젝트에 들어온 마크다운의 링크 입장에서는 상위로 가서 문서2 폴더로 이동해야 하기 때문이다. 파일 내 링크 변환\n~/data/vimwiki/*.md --\u003e 파일 내 링크 변환 --\u003e ~/data/www/content/wiki/\n이를 처리하는 스크립트를 작성 (핵심만 표현) #!/usr/bin/env bash # prog_name: blogen.sh src=\"~/data/vimwiki\" dst=\"~/data/www/content/wiki for file in ${src}/*.md do # 기본 파일 이름을 구함 base_name=$(basename $file) # 넘어온 파일 중에 index.md는 파일이름을 바꿈: hugo에서 문제 발생 if [ \"$base_name\" == \"index.md\" ];then base_name=\"wiki-index.md\" # 파일 내에 있는 링크를 모두 수정해서 hugo 개발폴더에 넣어준다. # 아래 필터링은 마크다운의 인용구에 대해서도 링크를 처리하는 문제점이 있다. # 추후 정교하게 다시 만들 필요가 있다. cat $file | \\ sed -e 's|](|](../|g' -e 's|](../http|](http|g' \\ \u003e ${dst}/${basename} done 수정사항 - 위 코드의 문제점 때문에 쉘스크립트를 파일로 부터 한 줄씩 넘기면서 처리토록 하였다. 한 줄에 하나 이상의 링크일 경우, 외부 링크일 경우, 단어 인용, 구문인용 등을 식별하여 모두 처리하도록 하였다. 그러나 grep이나 sed 등을 모든 경우에 사용하다보니 속도가 많이 느려졌다. 이를 개선하기 위해 lua를 공부하여 만들었는데 매우 빠른 처리가 가능했다. 그리고 더욱 처리 성능을 높인 것은 변경된 또는 새로 추가된 파일만 식별해서 처리하도록 한 것이다. 기본 아이디어는 스크립트를 실행시 시간을 자동 저장하고, 다음 처리 때 이 시간과 파일의 mtime을 비교하는 것이다. 이 스크립트는 며칠 공부하고 만든 것이라 많이 부족하지만 혹시 참고가 될까 하여 링크를 걸어 두었다. 이를 vim에서 단축키 실행 등록을 해두면 편하다. 글에만 집중할 수 있게 된다. https://github.com/neosolaris/neosolaris.github.io/blob/main/www/blogen-0.1.lua 로컬 웹서버를 띄우고 브라우저에서 오류나 문제점들을 확인한다. $ hugo -D server 웹페이지를 로컬저장소에 만들고, github 저장소로 업데이트 한다. $ cd ~/data/www $ hugo -D -d ~/data/your_idname.github.io $ cd ~/data/your_idname.github.io $ git add . \u0026\u0026 git commit . -m \"update files\" \u0026\u0026 git push 브라우저에서 확인한다. (업데이트 이후 변경을 확인하는데 2-5분 소요) Step5. 자동화 하기 vimwiki에서 작성한 문서를 vimwki2html이라는 기능으로 변환이 가능하나 이는 hugo 스타일과 맞지 않기 때문에 위의 blogen.sh를 수행하도록 한다.\nbolgen.sh {gen|push|all}로 기능을 확장시키고 이를 상황에 따라 실행한다. blogen.sh gen - vimwiki에서 hugo로 옮길 때 링크변환 및 html 생성하기 blogen.sh push - github에 올리기 blogen.sh all - 위 두 과정 모두 실행 vimwiki에서 문서 작업 완료 후 실행하기 - vim lastline mode\n물론 blogen.sh가 PATH에 설정되어 있어야 한다. :! blogen.sh {gen|push|all} 참고 사항 vimwik의 기준이 되는 문서 index.md 파일은 hugo에서의 충돌로 wiki-index.md로 바꿔주어야 한다. hugo에서는 가장 최신의 문서가 블로그 홈화면의 최상위로 뜨며 다섯개가 기본. 우선 순위는 frontmatter에서 weight=1 식으로 줄 수 있다. 1이 최상. ~/data/www도 어차피 개발 폴더이기 때문에 ~/data/your_idname.github.io/www로 포함시키고 깃허브에서 통합해서 관리하는 것도 좋겠다. 이 경우 분리된 상태로 먼저 작업했다가 페이지가 안정적으로 동작하고 난 후에 개발폴더를 옮겨 준다. 이에 따라 변경된 폴더들을 blogen.sh에도 잘 반영해야한다. 기본 15 페이지 기준으로 ~/data/www는 약 1.2Mb 정도이다. 이제 웹개발 환경이 구축되었으므로 블로그를 본격적으로 꾸며간다. 이것은 테마 papermod를 사용하였으므로 papermod 설치 및 설정을 참고한다. TODO 2022.10.06: 오타 수정, shell 명령어 인용코드 정리 2022.09.12: vimwiki에서 파일명과 링크를 수정했을 때 hugo에서 과거 파일이 남는 문제 처리 프로그램 blogen.lua에 양쪽의 파일을 조사하여 동기화 처리 Links https://cristianpb.github.io/blog/vimwiki-hugo https://gohugo.io/getting-started/quick-start/ https://themes.gohugo.io/themes/hugo-papermod/ ","wordCount":"1350","inLanguage":"en","image":"https://neosolaris.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2022-08-24T00:39:08+09:00","dateModified":"2022-10-06T00:52:29+09:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://neosolaris.github.io/posts/vimwiki-hugo-github/"},"publisher":{"@type":"Organization","name":"Borisu Wiki Home","logo":{"@type":"ImageObject","url":"https://neosolaris.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://neosolaris.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://neosolaris.github.io/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://neosolaris.github.io/posts/ title="🔨 Posts"><span>🔨 Posts</span></a></li><li><a href=https://neosolaris.github.io/categories/ title="🗃 Categories"><span>🗃 Categories</span></a></li><li><a href=https://neosolaris.github.io/archive/ title="🗄 Archive"><span>🗄 Archive</span></a></li><li><a href=https://neosolaris.github.io/posts/windex title=Index><span>Index</span></a></li><li><a href=https://neosolaris.github.io/search/ title="🔍 Search (Alt + /)" accesskey=/><span>🔍 Search</span></a></li><li><a href=https://neosolaris.github.io/about/ title="🪵 About"><span>🪵 About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://neosolaris.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://neosolaris.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Vimwiki Hugo Github.io 연동하기</h1><div class=post-meta><span title='2022-08-24 00:39:08 +0900 KST'>2022-08-24</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;1350 words&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/vimwiki-hugo-github.md rel="noopener noreferrer edit" target=_blank>Suggest Changes</a></div></header><div class=post-content><h2 id=소개>소개<a hidden class=anchor aria-hidden=true href=#소개>#</a></h2><p>마크다운 문서를 vimwiki로 작성하여 간단한 메모에서 부터 블로그, 리포트, 기술 문서에 이르기까지 손쉽게 만들 수 있다. 이를 기반으로 하여 깃허브에서 제공하는 무료 웹사이트에 올리는 방법을 설명하고자 한다. 아래는 간략한 개요이다.</p><ul><li><code>vimwiki + hugo + github.io</code> 를 연결하는 프로젝트이다.</li><li>vim의 vimwiki 플러그인을 사용하여 위키문서를 작성한다.</li><li>위키문서의 작성은 마크다운(../markdown) 문법으로 한다.</li><li>hugo를 사용하여 임시 로컬웹서버를 띄우고 위키문서를 html로 변환하고 브라우저에서 확인한다.</li><li>변환된 정적 html 문서를 깃허브에 올린다.</li><li>깃허브 페이지에서 이를 확인한다.</li><li>UTF-8인코딩이라면 한글도 특별히 문제가 없고 잘 된다. 다만 마크다운 파일명에 공백이 들어가면 관리가 좋지 않으니 <code>-</code>등으로 연결해서 쓴다.</li></ul><h2 id=설치-환경>설치 환경<a hidden class=anchor aria-hidden=true href=#설치-환경>#</a></h2><ul><li><p>OS 및 프로그램 버전</p><ul><li>os: Ubuntu 22.04 LTS</li><li>git: 2.34.1</li><li>vim: 8.2</li><li>vimwiki 플러그인: 2.5</li><li>hugo: 0.92.2</li><li>firefox: 104.0</li></ul></li><li><p><code>~/data/vimwiki/</code> : 위키 저장 폴더 (1.위키를 작성하고)</p></li><li><p><code>~/data/www/</code> : hugo 웹개발 폴더 (2.웹페이지 생성, 테스트, 개발)</p></li><li><p><code>~/data/your_idname.github.io/</code> : 깃허브 로컬 저장소, 웹페이지 위치 (3.결과물을 저장소에 업로드)</p></li></ul><h2 id=이-프로젝트의-목적과-방향>이 프로젝트의 목적과 방향<a hidden class=anchor aria-hidden=true href=#이-프로젝트의-목적과-방향>#</a></h2><ul><li><p>마크다운 (../markdown)을 기본 문서 포맷으로 정한 이유</p><ul><li>ms word나 hwp 등은 해당 프로그램이 있어야하고 linux, unix 에서 사용하기 곤란하다.</li><li>언제 어디에서나 작성 가능한 txt 파일이 가장 좋으나 다른 문서로 변환이 곤란하다.</li><li>마크다운 문법이 가장 쉬우면서 여러 포맷으로 변환이 가능하다.</li></ul></li><li><p><a href=../vimwiki>vimwiki</a> 를 사용하게 된 이유</p><ul><li>깃허브에서 사용되는 마크다운 문법을 지원한다.</li><li>위키이므로 문서를 서로 연결하고 조금씩 개선되는 방식이라 좋다.</li><li>일기나 할일 등의 기능을 제공하여 일정 관리가 편하다.</li><li>vi 또는 <a href=../vim>vim</a>에 익숙한 사용자에게는 가장 좋은 해결책이다.</li><li>하나의 위키 또는 여러개의 위키 프로젝트를 만들 수 있다.</li><li>설정된 폴더에 위키를 저장하고 깃허브 또는 <a href=../dropbox>dropbox</a> 등에 백업하기 편리하다.</li><li>vim의 다양한 플러그인과 기능 설정을 활용하여 작업의 자동화, 문서 변환 등을 쉽게 할 수 있다.</li></ul></li><li><p><a href=../hugo>hugo</a>를 통해 웹개발과 html 변환</p><ul><li>깃허브에서 제공하는 <a href=../github.io>github io</a>는 정적인 html만을 올릴 수 있다.</li><li>물론 md(마크다운) 파일을 올려도 볼 수 있지만 hugo와 테마를 이용하면 근사한 개인 블로그를 만들 수 있다.</li><li>또한 깃허브에 업로드하면 2-3분 정도 후에야 변경을 확인할 수 있다.</li><li>따라서 vimwiki로 만든 파일을 html로 변환하고 로컬에서 테스트할 개발 환경이 필요해진다.</li><li>대표적인 것으로 <a href=../hugo>jekyll</a>가 있다.</li><li><a href=../ruby>jekyll</a> 기반으로 설치가 복잡하고 모듈 의존성, 처리 속도 문제 등이 있다.</li><li><a href=../go>hugo</a> 기반으로 의존성 문제없이 프로그램 하나만 설치하면 되고 처리 속도도 매우 빠르다.</li><li>테마는 <a href=../hugo-papermod>papermod</a>를 사용하기로 했다. 가장 심플하고 안정적이고 깔끔하다.</li><li>테마를 적용하면 search, tag, category, archive, 통계, 댓글 등 다양한 기능이 지원된다.</li></ul></li><li><p><a href=../github.io>github io</a>에 블로그 또는 위키페이지를 올리는 이유</p><ul><li>홈페이지가 무료이다.</li><li><code>your_idname.github.io</code>도메인을 기본 제공하고 개인 도메인 설정도 가능하다.</li><li>문서의 변경사항 추적 및 복원, 버전관리도 된다.</li><li>내 위키 문서에 대한 백업도 편리하게 할 수 있다.</li></ul></li></ul><h2 id=기본-설치와-설정-방법>기본 설치와 설정 방법<a hidden class=anchor aria-hidden=true href=#기본-설치와-설정-방법>#</a></h2><ul><li><p>본 문서에는 실제로 설치 및 설정을 순서대로 간략하게 흐름을 잃지 않는 선에서 설명하고 각각의 자세한 설명은 아래 문서로 대체한다.</p><ul><li><a href=../github.io>github io 페이지 등록 및 설정</a></li><li><a href=../vimwiki>vimwiki 설치 및 설정</a></li><li><a href=../hugo>hugo 설치 및 설정</a></li><li><a href=../hugo-papermod>papermod 테마 설치 및 설정</a></li></ul></li></ul><h2 id=step1-githubio-페이지-등록-및-설정>Step1. github.io 페이지 등록 및 설정<a hidden class=anchor aria-hidden=true href=#step1-githubio-페이지-등록-및-설정>#</a></h2><ul><li><p><code>github.com</code>에 가입하고 새 저장소를 만든다.</p><ol><li><code>https://github.com/your_idname</code> 로 로그인한다.</li><li>우측 상단 <code>+</code> 아이콘을 눌러 <code>Create a new repository</code> 클릭.</li><li>Repository name은 반드시 자신의 사용자명을 이용해서 만든다.<blockquote><p>your_idname.github.io</p></blockquote></li><li>public 선택 > Create repository 로 생성 완료.</li></ol></li><li><p><a href=../github-ssh-key-%EC%9D%B8%EC%A6%9D>git</a>을 참조</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=gp>$</span> sudo apt install git
</span></span><span class=line><span class=cl><span class=gp>$</span> <span class=nb>cd</span> ~/data/
</span></span><span class=line><span class=cl><span class=gp>$</span> git config --global user.name your_idname
</span></span><span class=line><span class=cl><span class=gp>$</span> git config --global user.email yourid@gmail.com
</span></span><span class=line><span class=cl><span class=gp>$</span> git clone git@github.com:your_idname/your_idname.github.io.git
</span></span><span class=line><span class=cl><span class=gp>$</span> <span class=nb>cd</span> your_idname.github.io.git
</span></span><span class=line><span class=cl><span class=gp>$</span> git remote set-url git@github.com:github.com:your_idname/your_idname.github.io.git
</span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=gp>$</span> <span class=nb>echo</span> <span class=s2>&#34;&lt;H1&gt; Hello World! &lt;/H1&gt;&#34;</span> &gt; index.html
</span></span><span class=line><span class=cl><span class=gp>$</span> git add . <span class=o>&amp;&amp;</span> git commit . -m <span class=s2>&#34;Upload files&#34;</span> <span class=o>&amp;&amp;</span> git push
</span></span><span class=line><span class=cl><span class=gp>$</span> firefox https://your_idname.github.io <span class=p>&amp;</span>
</span></span></code></pre></div><h2 id=step2-vimwiki-설치-및-설정>Step2. Vimwiki 설치 및 설정<a hidden class=anchor aria-hidden=true href=#step2-vimwiki-설치-및-설정>#</a></h2><ul><li>vim vim-plug 설치</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=gp>$</span> sudo apt install vim
</span></span><span class=line><span class=cl><span class=gp>$</span> curl -fLo ~/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
</span></span><span class=line><span class=cl><span class=gp>$</span> vim ~/.vimrc
</span></span></code></pre></div><ul><li><code>~/.vimrc</code> 설정 파일</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-vimrc data-lang=vimrc><span class=line><span class=cl><span class=nx>call</span> <span class=nx>plug</span>#<span class=nx>begin</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nx>Plug</span> <span class=s1>&#39;vimwiki/vimwiki&#39;</span><span class=p>,</span> {<span class=s1>&#39;branch&#39;</span>: <span class=s1>&#39;dev&#39;</span>}
</span></span><span class=line><span class=cl><span class=nx>call</span> <span class=nx>plug</span>#<span class=nx>end</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=c>
</span></span></span><span class=line><span class=cl><span class=c>&#34; vimwiki 설정</span>
</span></span><span class=line><span class=cl><span class=c>&#34; 위키(github.io) 설정</span>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nx>g</span>:<span class=nx>vimwiki_list</span> <span class=p>=</span> [
</span></span><span class=line><span class=cl>	\{
</span></span><span class=line><span class=cl>	\   <span class=s1>&#39;path&#39;</span>: <span class=s1>&#39;~/data/vimwiki&#39;</span><span class=p>,</span>  <span class=c>&#34;위키문서의 위치</span>
</span></span><span class=line><span class=cl>	\   <span class=s1>&#39;syntax&#39;</span> : <span class=s1>&#39;markdown&#39;</span><span class=p>,</span>     <span class=c>&#34;마크다운 문법 지정</span>
</span></span><span class=line><span class=cl>	\   <span class=s1>&#39;ext&#39;</span> : <span class=s1>&#39;.md&#39;</span><span class=p>,</span>             <span class=c>&#34;저장 문서 포멧</span>
</span></span><span class=line><span class=cl>	\   <span class=s1>&#39;diary_rel_path&#39;</span>: <span class=s1>&#39;.&#39;</span><span class=p>,</span>   
</span></span><span class=line><span class=cl>	\}
</span></span><span class=line><span class=cl>	\]
</span></span><span class=line><span class=cl><span class=c>&#34; vimwiki의 conceallevel 을 끔</span>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nx>g</span>:<span class=nx>vimwiki_conceallevel</span> <span class=p>=</span> <span class=m>0</span>
</span></span><span class=line><span class=cl><span class=c>&#34; vimwiki 설정이 markdown의 모든 설정을 제어하지 않게하기</span>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nx>g</span>:<span class=nx>vimwiki_global_ext</span> <span class=p>=</span> <span class=m>0</span>  
</span></span></code></pre></div><ul><li>vimwik 플러그인 설치</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=gp>$</span> vim +PlugInstall +qall
</span></span></code></pre></div><ul><li>vimwiki로 테스트 문서 작성: vim 실행후 <code>\ww</code> 명령 후 <code>~/data/vimwiki/index.md</code> 문서를 시작으로 테스트로 2-3 개의 문서를 작성해 본다.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=gp>$</span> vim
</span></span></code></pre></div><h2 id=step3-hugo-설치-및-설정>Step3. Hugo 설치 및 설정<a hidden class=anchor aria-hidden=true href=#step3-hugo-설치-및-설정>#</a></h2><ul><li>hugo 및 테마 papermod 설치</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=gp>$</span> sudo apt install hugo
</span></span><span class=line><span class=cl><span class=gp>$</span> hugo version
</span></span><span class=line><span class=cl><span class=gp>$</span> hugo new site ~/data/www -f yml
</span></span><span class=line><span class=cl><span class=gp>$</span> tree ~/data/www
</span></span><span class=line><span class=cl><span class=go>.
</span></span></span><span class=line><span class=cl><span class=go>├── themes
</span></span></span><span class=line><span class=cl><span class=go>├── static
</span></span></span><span class=line><span class=cl><span class=go>├── layouts
</span></span></span><span class=line><span class=cl><span class=go>├── data
</span></span></span><span class=line><span class=cl><span class=go>├── content
</span></span></span><span class=line><span class=cl><span class=go>├── config.toml
</span></span></span><span class=line><span class=cl><span class=go>└── archetypes
</span></span></span><span class=line><span class=cl><span class=go>    └── default.md
</span></span></span><span class=line><span class=cl><span class=go>	
</span></span></span><span class=line><span class=cl><span class=go></span><span class=gp>$</span> <span class=nb>cd</span> ~/data/www
</span></span><span class=line><span class=cl><span class=gp>$</span> git clone https://github.com/adityatelange/hugo-PaperMod themes/PaperMod --depth<span class=o>=</span><span class=m>1</span>
</span></span></code></pre></div><ul><li>설정 및 테스트<ul><li>설정파일: <code>~/data/www/config.yml</code></li><li>테스트파일: <code>~/data/www/content/wiki/my-first-post.md</code></li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=gp>$</span> <span class=nb>cd</span> ~/data/www
</span></span><span class=line><span class=cl><span class=gp>$</span> <span class=nb>echo</span> <span class=s1>&#39;Theme: &#34;PaperMod&#34;&#39;</span> &gt;&gt; config.yml
</span></span><span class=line><span class=cl><span class=gp>$</span> hugo new wiki/my-first-post.md
</span></span><span class=line><span class=cl><span class=gp>$</span> vim wiki/my-first-post.md
</span></span></code></pre></div><ul><li>html 파일을 임시로 자동생성하고 로컬 웹서버를 띄우기</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=gp>$</span> <span class=nb>cd</span> ~/data/www
</span></span><span class=line><span class=cl><span class=gp>$</span> hugo -D server
</span></span></code></pre></div><ul><li><p>브라우저에서 확인
<code>http://127.0.0.1:1313</code></p></li><li><p>html 파일을 목적지에 생성하기</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=gp>$</span> <span class=nb>cd</span> ~/data/www    
</span></span><span class=line><span class=cl><span class=gp>$</span> hugo -D          <span class=c1># default: `~/data/www/public`</span>
</span></span><span class=line><span class=cl><span class=gp>$</span> hugo -D -d ~/data/your_idname.github.io  <span class=c1># 깃허브 로컬저장소</span>
</span></span></code></pre></div><h2 id=step4-vimwiki문서를-hugo에서-처리하여-깃허브에-업로드하기>Step4. Vimwiki문서를 Hugo에서 처리하여 깃허브에 업로드하기<a hidden class=anchor aria-hidden=true href=#step4-vimwiki문서를-hugo에서-처리하여-깃허브에-업로드하기>#</a></h2><ol><li>vimwiki 작성시 반드시 frontmatter를 넣어 문서를 작성한다.</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl>---
</span></span><span class=line><span class=cl>title: 문서1
</span></span><span class=line><span class=cl>date: 2022-08-24T16:28:44+09:00 (vim의 strftime이용, iabbr기능이용)
</span></span><span class=line><span class=cl>lastmod: 위형식으로 수정한 날짜 입력(vim의 strftime 이용)
</span></span><span class=line><span class=cl>tags: [&#34;테그1&#34;,&#34;테그2&#34;]
</span></span><span class=line><span class=cl>categories: [&#34;category1&#34;,&#34;category2&#34;]
</span></span><span class=line><span class=cl>&#34;weight&#34;: 1
</span></span><span class=line><span class=cl>---                                                                         
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=gu>## 소제목 1
</span></span></span><span class=line><span class=cl><span class=gu></span><span class=k>*</span> 내용 1
</span></span><span class=line><span class=cl><span class=k>*</span> 내용 2
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=gu>## 소제목 2
</span></span></span><span class=line><span class=cl><span class=gu></span><span class=k>*</span> 내용 3
</span></span><span class=line><span class=cl><span class=k>*</span> 내용 4
</span></span><span class=line><span class=cl><span class=k>*</span> [<span class=nt>문서2</span>](<span class=na>문서2</span>)
</span></span></code></pre></div><ol><li><p>작성된 문서(마크다운)들을 링크를 변환하여 hugo 웹개발 폴더에 복사한다.</p><ul><li>이 부분이 제일 문제인데 vimwiki 파일 내의 링크 형식 <code>[문서2](문서2)</code>가 hugo에서 html변환 시 링크를 잘 못 처리하는 데 있다.</li><li>이를 여러 가지로 알아 보았는데 hugo에서는 복잡한 설정으로 사용하기 어렵고 자동화하기도 어렵다. 각 페이지마다 hugo식의 링크방식을 넣어주어야 한다.</li><li>vimwiki에서 이를 변경할 수 있다해도 vimwiki 본래의 링크 연결이 안되어 문제가 된다.</li><li>현재로서는 vimwiki의 모든 md파일을 hugo 웹개발 폴더에 복사하는 중간에 이것을 처리해 주도록 하면 된다.</li><li>즉, <code>[문서2](문서2)</code> 부분을 <code>[문서2](../문서2)</code>로 바꾸어 준다.</li><li>그 이유는 html 결과물이 <code>BASE_URL/문서1/index.html</code> 이런 폴더 형식으로 바뀌기 때문에 hugo프로젝트에 들어온 마크다운의 링크 입장에서는 상위로 가서 <code>문서2</code> 폴더로 이동해야 하기 때문이다.</li></ul></li><li><p>파일 내 링크 변환</p></li></ol><p><code>~/data/vimwiki/*.md --> 파일 내 링크 변환 --> ~/data/www/content/wiki/</code></p><ul><li>이를 처리하는 스크립트를 작성 (핵심만 표현)</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/usr/bin/env bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1># prog_name: blogen.sh</span>
</span></span><span class=line><span class=cl><span class=nv>src</span><span class=o>=</span><span class=s2>&#34;~/data/vimwiki&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>dst</span><span class=o>=</span><span class=s2>&#34;~/data/www/content/wiki
</span></span></span><span class=line><span class=cl><span class=s2>for file in </span><span class=si>${</span><span class=nv>src</span><span class=si>}</span><span class=s2>/*.md
</span></span></span><span class=line><span class=cl><span class=s2>do
</span></span></span><span class=line><span class=cl><span class=s2>    # 기본 파일 이름을 구함
</span></span></span><span class=line><span class=cl><span class=s2>    base_name=</span><span class=k>$(</span>basename <span class=nv>$file</span><span class=k>)</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>    # 넘어온 파일 중에 index.md는 파일이름을 바꿈: hugo에서 문제 발생
</span></span></span><span class=line><span class=cl><span class=s2>    if [ &#34;</span><span class=nv>$base_name</span><span class=s2>&#34; == &#34;</span>index.md<span class=s2>&#34; ];then
</span></span></span><span class=line><span class=cl><span class=s2>        base_name=&#34;</span>wiki-index.md<span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    # 파일 내에 있는 링크를 모두 수정해서 hugo 개발폴더에 넣어준다.
</span></span></span><span class=line><span class=cl><span class=s2>    # 아래 필터링은 마크다운의 인용구에 대해서도 링크를 처리하는 문제점이 있다.
</span></span></span><span class=line><span class=cl><span class=s2>    # 추후 정교하게 다시 만들 필요가 있다.
</span></span></span><span class=line><span class=cl><span class=s2>    cat </span><span class=nv>$file</span><span class=s2> | \
</span></span></span><span class=line><span class=cl><span class=s2>    sed -e &#39;s|](|](../|g&#39; -e &#39;s|](../http|](http|g&#39; \
</span></span></span><span class=line><span class=cl><span class=s2>    &gt; </span><span class=si>${</span><span class=nv>dst</span><span class=si>}</span><span class=s2>/</span><span class=si>${</span><span class=nv>basename</span><span class=si>}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>done
</span></span></span></code></pre></div><ul><li>수정사항 - 위 코드의 문제점 때문에 쉘스크립트를 파일로 부터 한 줄씩 넘기면서 처리토록 하였다. 한 줄에 하나 이상의 링크일 경우, 외부 링크일 경우, 단어 인용, 구문인용 등을 식별하여 모두 처리하도록 하였다. 그러나 grep이나 sed 등을 모든 경우에 사용하다보니 속도가 많이 느려졌다. 이를 개선하기 위해 <a href=../lua>lua</a>를 공부하여 만들었는데 매우 빠른 처리가 가능했다. 그리고 더욱 처리 성능을 높인 것은 변경된 또는 새로 추가된 파일만 식별해서 처리하도록 한 것이다. 기본 아이디어는 스크립트를 실행시 시간을 자동 저장하고, 다음 처리 때 이 시간과 파일의 mtime을 비교하는 것이다. 이 스크립트는 며칠 공부하고 만든 것이라 많이 부족하지만 혹시 참고가 될까 하여 링크를 걸어 두었다. 이를 vim에서 단축키 실행 등록을 해두면 편하다. 글에만 집중할 수 있게 된다.
<a href=https://github.com/neosolaris/neosolaris.github.io/blob/main/www/blogen-0.1.lua>https://github.com/neosolaris/neosolaris.github.io/blob/main/www/blogen-0.1.lua</a></li></ul><ol start=3><li>로컬 웹서버를 띄우고 브라우저에서 오류나 문제점들을 확인한다.</li></ol><pre tabindex=0><code>$ hugo -D server
</code></pre><ol start=4><li>웹페이지를 로컬저장소에 만들고, github 저장소로 업데이트 한다.</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=gp>$</span> <span class=nb>cd</span> ~/data/www
</span></span><span class=line><span class=cl><span class=gp>$</span> hugo -D -d ~/data/your_idname.github.io
</span></span><span class=line><span class=cl><span class=gp>$</span> <span class=nb>cd</span> ~/data/your_idname.github.io
</span></span><span class=line><span class=cl><span class=gp>$</span> git add . <span class=o>&amp;&amp;</span> git commit . -m <span class=s2>&#34;update files&#34;</span> <span class=o>&amp;&amp;</span> git push
</span></span></code></pre></div><ol start=5><li>브라우저에서 확인한다. (업데이트 이후 변경을 확인하는데 2-5분 소요)</li></ol><h2 id=step5-자동화-하기>Step5. 자동화 하기<a hidden class=anchor aria-hidden=true href=#step5-자동화-하기>#</a></h2><ul><li><p>vimwiki에서 작성한 문서를 vimwki2html이라는 기능으로 변환이 가능하나 이는 hugo 스타일과 맞지 않기 때문에 위의 <code>blogen.sh</code>를 수행하도록 한다.</p><ul><li><code>bolgen.sh {gen|push|all}</code>로 기능을 확장시키고 이를 상황에 따라 실행한다.</li><li><code>blogen.sh gen</code> - vimwiki에서 hugo로 옮길 때 링크변환 및 html 생성하기</li><li><code>blogen.sh push</code> - github에 올리기</li><li><code>blogen.sh all</code> - 위 두 과정 모두 실행</li></ul></li><li><p>vimwiki에서 문서 작업 완료 후 실행하기 - vim lastline mode</p><ul><li>물론 <code>blogen.sh</code>가 PATH에 설정되어 있어야 한다.</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>:! blogen.sh {gen|push|all}
</span></span></span></code></pre></div><h2 id=참고-사항>참고 사항<a hidden class=anchor aria-hidden=true href=#참고-사항>#</a></h2><ul><li>vimwik의 기준이 되는 문서 <code>index.md</code> 파일은 hugo에서의 충돌로 wiki-index.md로 바꿔주어야 한다.</li><li>hugo에서는 가장 최신의 문서가 블로그 홈화면의 최상위로 뜨며 다섯개가 기본.</li><li>우선 순위는 <code>frontmatter</code>에서 <code>weight=1</code> 식으로 줄 수 있다. 1이 최상.</li><li><code>~/data/www</code>도 어차피 개발 폴더이기 때문에 <code>~/data/your_idname.github.io/www</code>로 포함시키고 깃허브에서 통합해서 관리하는 것도 좋겠다.</li><li>이 경우 분리된 상태로 먼저 작업했다가 페이지가 안정적으로 동작하고 난 후에 개발폴더를 옮겨 준다. 이에 따라 변경된 폴더들을 <code>blogen.sh</code>에도 잘 반영해야한다.</li><li>기본 15 페이지 기준으로 <code>~/data/www</code>는 약 1.2Mb 정도이다.</li><li>이제 웹개발 환경이 구축되었으므로 블로그를 본격적으로 꾸며간다.</li><li>이것은 테마 papermod를 사용하였으므로 <a href=../hugo-papermod>papermod 설치 및 설정</a>을 참고한다.</li></ul><h2 id=todo>TODO<a hidden class=anchor aria-hidden=true href=#todo>#</a></h2><ul><li><input checked disabled type=checkbox> 2022.10.06: 오타 수정, shell 명령어 인용코드 정리</li><li><input checked disabled type=checkbox> 2022.09.12: vimwiki에서 파일명과 링크를 수정했을 때 hugo에서 과거 파일이 남는 문제<ul><li><input checked disabled type=checkbox> 처리 프로그램 <code>blogen.lua</code>에 양쪽의 파일을 조사하여 동기화 처리</li></ul></li></ul><h2 id=links>Links<a hidden class=anchor aria-hidden=true href=#links>#</a></h2><ul><li><a href=https://cristianpb.github.io/blog/vimwiki-hugo>https://cristianpb.github.io/blog/vimwiki-hugo</a></li><li><a href=https://gohugo.io/getting-started/quick-start/>https://gohugo.io/getting-started/quick-start/</a></li><li><a href=https://themes.gohugo.io/themes/hugo-papermod/>https://themes.gohugo.io/themes/hugo-papermod/</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://neosolaris.github.io/tags/vimwiki/>Vimwiki</a></li><li><a href=https://neosolaris.github.io/tags/hugo/>Hugo</a></li><li><a href=https://neosolaris.github.io/tags/papermod/>Papermod</a></li><li><a href=https://neosolaris.github.io/tags/devel/>Devel</a></li></ul><nav class=paginav><a class=prev href=https://neosolaris.github.io/posts/github.io/><span class=title>« Prev</span><br><span>Github Page</span>
</a><a class=next href=https://neosolaris.github.io/posts/firefox/><span class=title>Next »</span><br><span>Firefox</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Vimwiki Hugo Github.io 연동하기 on x" href="https://x.com/intent/tweet/?text=Vimwiki%20Hugo%20Github.io%20%ec%97%b0%eb%8f%99%ed%95%98%ea%b8%b0&amp;url=https%3a%2f%2fneosolaris.github.io%2fposts%2fvimwiki-hugo-github%2f&amp;hashtags=vimwiki%2chugo%2cpapermod%2cdevel"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Vimwiki Hugo Github.io 연동하기 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fneosolaris.github.io%2fposts%2fvimwiki-hugo-github%2f&amp;title=Vimwiki%20Hugo%20Github.io%20%ec%97%b0%eb%8f%99%ed%95%98%ea%b8%b0&amp;summary=Vimwiki%20Hugo%20Github.io%20%ec%97%b0%eb%8f%99%ed%95%98%ea%b8%b0&amp;source=https%3a%2f%2fneosolaris.github.io%2fposts%2fvimwiki-hugo-github%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Vimwiki Hugo Github.io 연동하기 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fneosolaris.github.io%2fposts%2fvimwiki-hugo-github%2f&title=Vimwiki%20Hugo%20Github.io%20%ec%97%b0%eb%8f%99%ed%95%98%ea%b8%b0"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Vimwiki Hugo Github.io 연동하기 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fneosolaris.github.io%2fposts%2fvimwiki-hugo-github%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Vimwiki Hugo Github.io 연동하기 on whatsapp" href="https://api.whatsapp.com/send?text=Vimwiki%20Hugo%20Github.io%20%ec%97%b0%eb%8f%99%ed%95%98%ea%b8%b0%20-%20https%3a%2f%2fneosolaris.github.io%2fposts%2fvimwiki-hugo-github%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Vimwiki Hugo Github.io 연동하기 on telegram" href="https://telegram.me/share/url?text=Vimwiki%20Hugo%20Github.io%20%ec%97%b0%eb%8f%99%ed%95%98%ea%b8%b0&amp;url=https%3a%2f%2fneosolaris.github.io%2fposts%2fvimwiki-hugo-github%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Vimwiki Hugo Github.io 연동하기 on ycombinator" href="https://news.ycombinator.com/submitlink?t=Vimwiki%20Hugo%20Github.io%20%ec%97%b0%eb%8f%99%ed%95%98%ea%b8%b0&u=https%3a%2f%2fneosolaris.github.io%2fposts%2fvimwiki-hugo-github%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://neosolaris.github.io/>Borisu Wiki Home</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>