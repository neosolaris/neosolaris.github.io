<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>LuaJit - Lua Just in Time Compiler | Borisu Wiki Home</title>
<meta name=keywords content="lua,lugjit"><meta name=description content="last updated: {{ &ldquo;1736305941&rdquo; | date: &ldquo;%Y-%m-%d %H:%M&rdquo; }}
Intro


함수들이 처음 실행 될 때 필요에 의해 컴파일된다.


이것은 어플리케이션이 빠르게 시작되는 것과 불필요한 작업을 발생시키지 않는 것을 보장해 준다.


LuaJit은 neovim에 기본 탑재되어 있다.


python, ruby 등의 Jit보다 우수한 성능을 보여준다.


LuaJit의 FFI(Foreign Function Interface)는 Low-Level C언어 함수들을 별다른 작업 없이 직접적으로 사용할 수 있다.


네이티브에 견줄만큼 속도가 빠르고, 메모리 사용량이 매우 적다.


nginx에 LuaJIT을 포함시켜서 커스터마이징을 한 OpenResty 웹 서버도 있다."><meta name=author content="Me"><link rel=canonical href=https://neosolaris.github.io/posts/luajit/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.2211ca3164be7830024f6aad2b3a2e520843a64f8f048445c3401c1249aa051d.css integrity="sha256-IhHKMWS+eDACT2qtKzouUghDpk+PBIRFw0AcEkmqBR0=" rel="preload stylesheet" as=style><link rel=icon href=https://neosolaris.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://neosolaris.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://neosolaris.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://neosolaris.github.io/apple-touch-icon.png><link rel=mask-icon href=https://neosolaris.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://neosolaris.github.io/posts/luajit/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://neosolaris.github.io/posts/luajit/"><meta property="og:site_name" content="Borisu Wiki Home"><meta property="og:title" content="LuaJit - Lua Just in Time Compiler"><meta property="og:description" content="last updated: {{ “1736305941” | date: “%Y-%m-%d %H:%M” }}
Intro 함수들이 처음 실행 될 때 필요에 의해 컴파일된다.
이것은 어플리케이션이 빠르게 시작되는 것과 불필요한 작업을 발생시키지 않는 것을 보장해 준다.
LuaJit은 neovim에 기본 탑재되어 있다.
python, ruby 등의 Jit보다 우수한 성능을 보여준다.
LuaJit의 FFI(Foreign Function Interface)는 Low-Level C언어 함수들을 별다른 작업 없이 직접적으로 사용할 수 있다.
네이티브에 견줄만큼 속도가 빠르고, 메모리 사용량이 매우 적다.
nginx에 LuaJIT을 포함시켜서 커스터마이징을 한 OpenResty 웹 서버도 있다."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-30T14:51:27+09:00"><meta property="article:modified_time" content="2022-08-30T14:51:27+09:00"><meta property="article:tag" content="Lua"><meta property="article:tag" content="Lugjit"><meta property="og:image" content="https://neosolaris.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://neosolaris.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="LuaJit - Lua Just in Time Compiler"><meta name=twitter:description content="last updated: {{ &ldquo;1736305941&rdquo; | date: &ldquo;%Y-%m-%d %H:%M&rdquo; }}
Intro


함수들이 처음 실행 될 때 필요에 의해 컴파일된다.


이것은 어플리케이션이 빠르게 시작되는 것과 불필요한 작업을 발생시키지 않는 것을 보장해 준다.


LuaJit은 neovim에 기본 탑재되어 있다.


python, ruby 등의 Jit보다 우수한 성능을 보여준다.


LuaJit의 FFI(Foreign Function Interface)는 Low-Level C언어 함수들을 별다른 작업 없이 직접적으로 사용할 수 있다.


네이티브에 견줄만큼 속도가 빠르고, 메모리 사용량이 매우 적다.


nginx에 LuaJIT을 포함시켜서 커스터마이징을 한 OpenResty 웹 서버도 있다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://neosolaris.github.io/posts/"},{"@type":"ListItem","position":2,"name":"LuaJit - Lua Just in Time Compiler","item":"https://neosolaris.github.io/posts/luajit/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"LuaJit - Lua Just in Time Compiler","name":"LuaJit - Lua Just in Time Compiler","description":"last updated: {{ \u0026ldquo;1736305941\u0026rdquo; | date: \u0026ldquo;%Y-%m-%d %H:%M\u0026rdquo; }}\nIntro 함수들이 처음 실행 될 때 필요에 의해 컴파일된다.\n이것은 어플리케이션이 빠르게 시작되는 것과 불필요한 작업을 발생시키지 않는 것을 보장해 준다.\nLuaJit은 neovim에 기본 탑재되어 있다.\npython, ruby 등의 Jit보다 우수한 성능을 보여준다.\nLuaJit의 FFI(Foreign Function Interface)는 Low-Level C언어 함수들을 별다른 작업 없이 직접적으로 사용할 수 있다.\n네이티브에 견줄만큼 속도가 빠르고, 메모리 사용량이 매우 적다.\nnginx에 LuaJIT을 포함시켜서 커스터마이징을 한 OpenResty 웹 서버도 있다.\n","keywords":["lua","lugjit"],"articleBody":"last updated: {{ “1736305941” | date: “%Y-%m-%d %H:%M” }}\nIntro 함수들이 처음 실행 될 때 필요에 의해 컴파일된다.\n이것은 어플리케이션이 빠르게 시작되는 것과 불필요한 작업을 발생시키지 않는 것을 보장해 준다.\nLuaJit은 neovim에 기본 탑재되어 있다.\npython, ruby 등의 Jit보다 우수한 성능을 보여준다.\nLuaJit의 FFI(Foreign Function Interface)는 Low-Level C언어 함수들을 별다른 작업 없이 직접적으로 사용할 수 있다.\n네이티브에 견줄만큼 속도가 빠르고, 메모리 사용량이 매우 적다.\nnginx에 LuaJIT을 포함시켜서 커스터마이징을 한 OpenResty 웹 서버도 있다.\nlua vs luaJIT\n* PUC Lua (the \"normal interpreter\") is more stable, i.e. bugs are more frequently found in LuaJIT. * PUC Lua is smaller, i.e. it takes less memory. * PUC Lua is much easier to understand if you want to customize it. * PUC Lua has been ported to way more platforms and is easier to port. * Like @lhf said, LuaJIT does not support all of Lua 5.2 features yet. Install $ sudo apt update $ sudo apt install luajit $ luajit -h Usage 기본 사용법 usage: luajit [options]... [script [args]...]. Available options are: -e chunk Execute string 'chunk'. -l name Require library 'name'. -b ... Save or list bytecode. -j cmd Perform LuaJIT control command. -O[opt] Control LuaJIT optimizations. -i Enter interactive mode after executing 'script'. -v Show version information. -E Ignore environment variables. -- Stop handling options. - Execute stdin and stop handling options. 바이트코드 컴파일 -b 옵션은 컴파일 바이너리 코드를 생성한다. lua에서는 소스를 먼저 바이트코드로 만들어 최적화한 후 인터프리터에서 처리한다. 소스코드가 용량이 큰 경우 바이트코드로 미리 컴파일해 두면 훨씬 빨라진다. ./luajit: unknown luaJIT command or jit.* modules not installed 에러가 발생하는 경우는 $LUA_PATH 설정이 잘못되어 있는 경우이므로 unset LUA_PATH해주거나 $LUA_PATH에 luajit의 올바른 모듈경로를 추가해 준다. $ luajit -b test.lua test.luac # Save bytecode to test.out $ luajit -bg test.lua test.luac # Keep debug info $ luajit -be \"print('hello world')\" test.luac # Save cmdline script $ luajit -bl test.lua # List to stdout $ luajit -bl test.lua test.txt # List to test.txt $ luajit -ble \"print('hello world')\" # List cmdline script $ luajit -b test.lua test.obj # Generate object file $ # Link test.obj with your application and load it with require(\"test\") - 모듈의 경우에도 적용이 가능한데, 다음 두 가지 방법이 있다. $ luajit -b mymodule.lua mymodule.luac $ luajit luajit\u003e mymodule = assert(loadfile(\"module.luac\"))() $ luajit -b /path/to/mymodule.lua ./mymodule.lua $ luajit luajit\u003e mymodule = require'mymodule' FFI(Foreign Function Interface) LuaJIT는 C 함수를 손쉽게 가져와 사용할 수 있다. 아래 ffi모듈이 luajit의 내장된 기본 모듈이다. $ cat\u003c test-ffi.lua local ffi = require(\"ffi\") ffi.cdef[[int printf(const char *fmt, ...);]] ffi.C.printf(\"Hello %s!\\n\", \"wiki\") EOF $ luajit test-ffi.lua Hello wiki! FFI Tutorial - https://luajit.org/ext_ffi_tutorial.html lua-ffi-bindings - https://github.com/thenumbernine/lua-ffi-bindings Link Lua Jit Introduction - 한글번역 https://m.blog.naver.com/milennium9/20120034562 Usage - 사용법 https://luajit.org/running.html LuaJIT Wiki 문서 - 공부의 시작 http://wiki.luajit.org/Home ","wordCount":"446","inLanguage":"en","image":"https://neosolaris.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2022-08-30T14:51:27+09:00","dateModified":"2022-08-30T14:51:27+09:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://neosolaris.github.io/posts/luajit/"},"publisher":{"@type":"Organization","name":"Borisu Wiki Home","logo":{"@type":"ImageObject","url":"https://neosolaris.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://neosolaris.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://neosolaris.github.io/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://neosolaris.github.io/archive/ title="🗄 Archive"><span>🗄 Archive</span></a></li><li><a href=https://neosolaris.github.io/categories/ title="🗃 Categories"><span>🗃 Categories</span></a></li><li><a href=https://neosolaris.github.io/posts/windex title="📇 Index"><span>📇 Index</span></a></li><li><a href=https://neosolaris.github.io/search/ title="🔍 Search (Alt + /)" accesskey=/><span>🔍 Search</span></a></li><li><a href=https://neosolaris.github.io/about/ title="🪵 About"><span>🪵 About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://neosolaris.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://neosolaris.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">LuaJit - Lua Just in Time Compiler</h1><div class=post-meta><span title='2022-08-30 14:51:27 +0900 KST'>2022-08-30</span>&nbsp;·&nbsp;446 words</div></header><div class=post-content><p>last updated: {{ &ldquo;1736305941&rdquo; | date: &ldquo;%Y-%m-%d %H:%M&rdquo; }}</p><h2 id=intro>Intro<a hidden class=anchor aria-hidden=true href=#intro>#</a></h2><ul><li><p>함수들이 처음 실행 될 때 필요에 의해 컴파일된다.</p></li><li><p>이것은 어플리케이션이 빠르게 시작되는 것과 불필요한 작업을 발생시키지 않는 것을 보장해 준다.</p></li><li><p>LuaJit은 neovim에 기본 탑재되어 있다.</p></li><li><p>python, ruby 등의 Jit보다 우수한 성능을 보여준다.</p></li><li><p>LuaJit의 FFI(Foreign Function Interface)는 Low-Level C언어 함수들을 별다른 작업 없이 직접적으로 사용할 수 있다.</p></li><li><p>네이티브에 견줄만큼 속도가 빠르고, 메모리 사용량이 매우 적다.</p></li><li><p>nginx에 LuaJIT을 포함시켜서 커스터마이징을 한 OpenResty 웹 서버도 있다.</p></li><li><p>lua vs luaJIT</p></li></ul><pre tabindex=0><code>* PUC Lua (the &#34;normal interpreter&#34;) is more stable, i.e. bugs are more frequently found in LuaJIT.
* PUC Lua is smaller, i.e. it takes less memory.
* PUC Lua is much easier to understand if you want to customize it.
* PUC Lua has been ported to way more platforms and is easier to port.
* Like @lhf said, LuaJIT does not support all of Lua 5.2 features yet.
</code></pre><h2 id=install>Install<a hidden class=anchor aria-hidden=true href=#install>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=gp>$</span> sudo apt update
</span></span><span class=line><span class=cl><span class=gp>$</span> sudo apt install luajit
</span></span><span class=line><span class=cl><span class=gp>$</span> luajit -h
</span></span></code></pre></div><h2 id=usage>Usage<a hidden class=anchor aria-hidden=true href=#usage>#</a></h2><ul><li>기본 사용법</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>usage: luajit [options]... [script [args]...].
</span></span></span><span class=line><span class=cl><span class=go>Available options are:
</span></span></span><span class=line><span class=cl><span class=go>  -e chunk  Execute string &#39;chunk&#39;.
</span></span></span><span class=line><span class=cl><span class=go>  -l name   Require library &#39;name&#39;.
</span></span></span><span class=line><span class=cl><span class=go>  -b ...    Save or list bytecode.
</span></span></span><span class=line><span class=cl><span class=go>  -j cmd    Perform LuaJIT control command.
</span></span></span><span class=line><span class=cl><span class=go>  -O[opt]   Control LuaJIT optimizations.
</span></span></span><span class=line><span class=cl><span class=go>  -i        Enter interactive mode after executing &#39;script&#39;.
</span></span></span><span class=line><span class=cl><span class=go>  -v        Show version information.
</span></span></span><span class=line><span class=cl><span class=go>  -E        Ignore environment variables.
</span></span></span><span class=line><span class=cl><span class=go>  --        Stop handling options.
</span></span></span><span class=line><span class=cl><span class=go>  -         Execute stdin and stop handling options.
</span></span></span></code></pre></div><ul><li>바이트코드 컴파일<ul><li><code>-b</code> 옵션은 컴파일 바이너리 코드를 생성한다.</li><li>lua에서는 소스를 먼저 바이트코드로 만들어 최적화한 후 인터프리터에서 처리한다.</li><li>소스코드가 용량이 큰 경우 바이트코드로 미리 컴파일해 두면 훨씬 빨라진다.</li><li><code>./luajit: unknown luaJIT command or jit.* modules not installed</code> 에러가
발생하는 경우는 $LUA_PATH 설정이 잘못되어 있는 경우이므로 <code>unset LUA_PATH</code>해주거나
$LUA_PATH에 luajit의 올바른 모듈경로를 추가해 준다.</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=gp>$</span> luajit -b test.lua test.luac                <span class=c1># Save bytecode to test.out</span>
</span></span><span class=line><span class=cl><span class=gp>$</span> luajit -bg test.lua test.luac               <span class=c1># Keep debug info</span>
</span></span><span class=line><span class=cl><span class=gp>$</span> luajit -be <span class=s2>&#34;print(&#39;hello world&#39;)&#34;</span> test.luac <span class=c1># Save cmdline script</span>
</span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=gp>$</span> luajit -bl test.lua                         <span class=c1># List to stdout</span>
</span></span><span class=line><span class=cl><span class=gp>$</span> luajit -bl test.lua test.txt                <span class=c1># List to test.txt</span>
</span></span><span class=line><span class=cl><span class=gp>$</span> luajit -ble <span class=s2>&#34;print(&#39;hello world&#39;)&#34;</span>          <span class=c1># List cmdline script</span>
</span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=gp>$</span> luajit -b test.lua test.obj                 <span class=c1># Generate object file</span>
</span></span><span class=line><span class=cl><span class=gp>$</span> <span class=c1># Link test.obj with your application and load it with require(&#34;test&#34;)</span>
</span></span></code></pre></div><pre><code>- 모듈의 경우에도 적용이 가능한데, 다음 두 가지 방법이 있다.
</code></pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=gp>$</span> luajit -b mymodule.lua mymodule.luac
</span></span><span class=line><span class=cl><span class=gp>$</span> luajit
</span></span><span class=line><span class=cl><span class=go>luajit&gt; mymodule = assert(loadfile(&#34;module.luac&#34;))()
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=gp>$</span> luajit -b /path/to/mymodule.lua ./mymodule.lua
</span></span><span class=line><span class=cl><span class=gp>$</span> luajit
</span></span><span class=line><span class=cl><span class=go>luajit&gt; mymodule = require&#39;mymodule&#39;
</span></span></span></code></pre></div><h2 id=ffiforeign-function-interface>FFI(Foreign Function Interface)<a hidden class=anchor aria-hidden=true href=#ffiforeign-function-interface>#</a></h2><ul><li>LuaJIT는 C 함수를 손쉽게 가져와 사용할 수 있다.</li><li>아래 <code>ffi</code>모듈이 luajit의 내장된 기본 모듈이다.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=gp>$</span> cat&lt;&lt;EOF &gt; test-ffi.lua
</span></span><span class=line><span class=cl><span class=go>local ffi = require(&#34;ffi&#34;)
</span></span></span><span class=line><span class=cl><span class=go>ffi.cdef[[int printf(const char *fmt, ...);]]
</span></span></span><span class=line><span class=cl><span class=go>ffi.C.printf(&#34;Hello %s!\n&#34;, &#34;wiki&#34;)
</span></span></span><span class=line><span class=cl><span class=go>EOF
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=gp>$</span> luajit test-ffi.lua
</span></span><span class=line><span class=cl><span class=go>Hello wiki!
</span></span></span></code></pre></div><ul><li>FFI Tutorial - <a href=https://luajit.org/ext_ffi_tutorial.html>https://luajit.org/ext_ffi_tutorial.html</a></li><li>lua-ffi-bindings - <a href=https://github.com/thenumbernine/lua-ffi-bindings>https://github.com/thenumbernine/lua-ffi-bindings</a></li></ul><h2 id=link>Link<a hidden class=anchor aria-hidden=true href=#link>#</a></h2><ul><li>Lua Jit Introduction - 한글번역<ul><li><a href=https://m.blog.naver.com/milennium9/20120034562>https://m.blog.naver.com/milennium9/20120034562</a></li></ul></li><li>Usage - 사용법<ul><li><a href=https://luajit.org/running.html>https://luajit.org/running.html</a></li></ul></li><li>LuaJIT Wiki 문서 - 공부의 시작<ul><li><a href=http://wiki.luajit.org/Home>http://wiki.luajit.org/Home</a></li></ul></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://neosolaris.github.io/tags/lua/>Lua</a></li><li><a href=https://neosolaris.github.io/tags/lugjit/>Lugjit</a></li></ul><nav class=paginav><a class=prev href=https://neosolaris.github.io/posts/rust-compile-size/><span class=title>« Prev</span><br><span>Rust Compile시 용량 줄이기</span>
</a><a class=next href=https://neosolaris.github.io/posts/luarocks/><span class=title>Next »</span><br><span>Luarocks - lua 패키지 관리</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://neosolaris.github.io/>Borisu Wiki Home</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>